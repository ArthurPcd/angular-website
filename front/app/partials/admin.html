<div class="admin-panel" ng-controller="adminCtrl">
    <h1>Panel d'Administration</h1>

    <div class="admin-nav mb-4">
        <button ng-click="showAllUsers()" class="btn btn-info">Afficher tous les utilisateurs</button>
        <button ng-click="createUser()" class="btn btn-success">Créer Utilisateur</button>
        <span class="badge badge-primary">Nombre d'utilisateurs : {{ getUsersCount() }}</span>
        <span class="badge badge-primary">Nombre d'admins : {{ getAdminsCount() }}</span>
    </div>

    <div ng-show="showCreateUserForm" class="create-user-form mb-4">
        <h2>Créer un nouvel utilisateur</h2>
        <input type="text" ng-model="newUser.firstName" placeholder="Prénom" class="form-control">
        <input type="text" ng-model="newUser.lastName" placeholder="Nom" class="form-control">
        <input type="email" ng-model="newUser.email" placeholder="Email" class="form-control">
        <input type="checkbox" ng-model="newUser.isAdmin"> Admin
        <button ng-click="createUser(newUser)" class="btn btn-success">Ajouter</button>
    </div>
    <div ng-show="editingUser" class="edit-user-form mb-4">
        <h2>Modifier un utilisateur</h2>
        <input type="text" ng-model="editingUser.firstName" placeholder="Prénom" class="form-control">
        <input type="text" ng-model="editingUser.lastName" placeholder="Nom" class="form-control">
        <input type="email" ng-model="editingUser.email" placeholder="Email" class="form-control">
        <input type="checkbox" ng-model="editingUser.isAdmin"> Admin
        <button ng-click="updateUser(editingUser)" class="btn btn-success">Modifier</button>
    </div>

    <div class="user-management">
        <h2>Gestion des Utilisateurs</h2>
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>ID</th>
                <th>Prénom</th>
                <th>Nom</th>
                <th>Email</th>
                <th>Admin</th>
                <th>Token</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="user in users">
                <td>{{ user.id }}</td>
                <td>{{ user.firstName }}</td>
                <td>{{ user.lastName }}</td>
                <td>{{ user.email }}</td>
                <td>{{ user.isAdmin ? 'Oui' : 'Non' }}</td>
                <td>{{ user.token }}</td>
                <td>
                    <button class="btn btn-danger" ng-click="deleteUser(user.id)"><i class="fa fa-trash"></i></button>
                    <button class="btn btn-primary" ng-click="editUser(user)"><i class="fa fa-pencil-alt"></i></button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>

    <div class="user-detail-modal" ng-show="selectedUser">
        <h2>Détails de l'utilisateur</h2>
        <p>Nom : {{ selectedUser.firstName }} {{ selectedUser.lastName }}</p>
        <p>Email : {{ selectedUser.email }}</p>
        <p>Admin : {{ selectedUser.isAdmin ? 'Oui' : 'Non' }}</p>
        <p>Token : {{ selectedUser.token }}</p>
        <button class="btn btn-primary" ng-click="closeUserModal()">Fermer</button>
    </div>

    <div class="admin-stats">
        <h2>Statistiques Rapides</h2>
        <p>Nombre total d'utilisateurs : {{ users.length }}</p>
        <p>Nombre d'admins : {{ getAdminsCount() }}</p>
    </div>

    <div class="user-search">
        <input type="text" ng-model="searchTerm" placeholder="Rechercher utilisateur" class="form-control">
    </div>

    <div class="user-activity">
        <h2>User Activity</h2>
        <canvas id="userActivityChart" width="400" height="200"></canvas>
    </div>

    <div class="recent-logins">
        <h2>Recent Logins</h2>
        <ul>
            <li> {{getUserInfos(1)}} - {{getLogDate(1)}}</li>
        </ul>
    </div>

    <div class="user-activity-chart">
        <h2>User Activity Chart</h2>
        <canvas id="activityChart" width="400" height="200"></canvas>
    </div>

    <script>
        var activityChartCanvas = document.getElementById('activityChart').getContext('2d');
        var activityChartData = {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May'], // Ajoutez vos propres étiquettes ici
            datasets: [{
                label: 'User Activity',
                data: [12, 19, 3, 5, 2], // Ajoutez vos propres données ici
                backgroundColor: 'rgba(75, 192, 192, 0.2)', // Couleur de remplissage
                borderColor: 'rgba(75, 192, 192, 1)', // Couleur de la bordure
                borderWidth: 1
            }]
        };
        var activityChart = new Chart(activityChartCanvas, {
            type: 'bar', // Type de graphique (bar, line, pie, etc.)
            data: activityChartData
        });

        var userActivityChartCanvas = document.getElementById('userActivityChart').getContext('2d');
        var userActivityChartData = {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'], // Ajoutez vos propres étiquettes ici
            datasets: [{
                label: 'User Activity',
                data: [30, 25, 40, 35, 50], // Ajoutez vos propres données ici
                backgroundColor: 'rgba(255, 99, 132, 0.2)', // Couleur de remplissage
                borderColor: 'rgba(255, 99, 132, 1)', // Couleur de la bordure
                borderWidth: 1
            }]
        };
        var userActivityChart = new Chart(userActivityChartCanvas, {
            type: 'line', // Type de graphique (bar, line, pie, etc.)
            data: userActivityChartData
        });
    </script>

    <div class="user-roles-management">
        <!-- Gestion des rôles utilisateurs -->
    </div>

    <div class="admin-alerts">
        <!-- Affichage des alertes et notifications -->
    </div>

    <div class="token-management">
        <!-- Gestion et affichage des tokens -->
    </div>

    <div class="admin-settings">
        <!-- Réglages administratifs -->
    </div>
</div>

